<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Topology optimization of binary structures (TOBS), a nonlinear binary optimization heuristic · Nonconvex.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Nonconvex.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Getting started</a></li><li><span class="tocitem">Problem definition</span><ul><li><a class="tocitem" href="../../problem/problem/">Overview</a></li><li><a class="tocitem" href="../../problem/model/"><code>Model</code> definition</a></li><li><a class="tocitem" href="../../problem/dict_model/"><code>DictModel</code> definition</a></li><li><a class="tocitem" href="../../problem/queries/">Querying models</a></li></ul></li><li><span class="tocitem">Gradients, Jacobians and Hessians</span><ul><li><a class="tocitem" href="../../gradients/gradients/">Overview</a></li><li><a class="tocitem" href="../../gradients/user_defined/">User-defined gradient, Jacobian or Hessian</a></li><li><a class="tocitem" href="../../gradients/other_ad/">Using other AD packages</a></li><li><a class="tocitem" href="../../gradients/chainrules_fd/">Using ChainRules in ForwardDiff</a></li><li><a class="tocitem" href="../../gradients/sparse/">Sparse Jacobian or Hessian</a></li><li><a class="tocitem" href="../../gradients/symbolic/">Symbolic differentiation</a></li><li><a class="tocitem" href="../../gradients/implicit/">Implicit differentiation</a></li><li><a class="tocitem" href="../../gradients/history/">Storing history of gradients</a></li></ul></li><li><span class="tocitem">Algorithms</span><ul><li><a class="tocitem" href="../algorithms/">Overview</a></li><li><a class="tocitem" href="../mma/">Method of moving asymptotes in pure Julia</a></li><li><a class="tocitem" href="../ipopt/">Interior point method using <code>Ipopt.jl</code></a></li><li><a class="tocitem" href="../nlopt/">Various optimization algorithms from <code>NLopt.jl</code></a></li><li><a class="tocitem" href="../auglag/">Augmented Lagrangian algorithm in pure Julia</a></li><li><a class="tocitem" href="../minlp/">First and second order mixed integer nonlinear programming algorithms</a></li><li><a class="tocitem" href="../hyperopt/">Multi-start and hyper-parameter optimization in pure Julia</a></li><li><a class="tocitem" href="../surrogate/">Surrogate-assisted continuous and discrete, constrained optimization</a></li><li><a class="tocitem" href="../mts/">Multi-trajectory search algorithm in pure Julia</a></li><li><a class="tocitem" href="../sdp/">Interior point meta-algorithm for handling nonlinear semidefinite constraints</a></li><li><a class="tocitem" href="../metaheuristics/">A collection of meta-heuristic algorithms in pure Julia</a></li><li><a class="tocitem" href="../nomad/">Nonlinear optimization with the MADS (NOMAD) algorithm for continuous and discrete, constrained optimization</a></li><li class="is-active"><a class="tocitem" href>Topology optimization of binary structures (TOBS), a nonlinear binary optimization heuristic</a><ul class="internal"><li><a class="tocitem" href="#Description"><span>Description</span></a></li><li><a class="tocitem" href="#Construct-an-instance"><span>Construct an instance</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#Options"><span>Options</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../result/">Optimization result</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Algorithms</a></li><li class="is-active"><a href>Topology optimization of binary structures (TOBS), a nonlinear binary optimization heuristic</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Topology optimization of binary structures (TOBS), a nonlinear binary optimization heuristic</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaNonconvex/Nonconvex.jl/blob/master/docs/src/algorithms/tobs.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Topology-optimization-of-binary-structures-(TOBS),-a-nonlinear-binary-optimization-heuristic"><a class="docs-heading-anchor" href="#Topology-optimization-of-binary-structures-(TOBS),-a-nonlinear-binary-optimization-heuristic">Topology optimization of binary structures (TOBS), a nonlinear binary optimization heuristic</a><a id="Topology-optimization-of-binary-structures-(TOBS),-a-nonlinear-binary-optimization-heuristic-1"></a><a class="docs-heading-anchor-permalink" href="#Topology-optimization-of-binary-structures-(TOBS),-a-nonlinear-binary-optimization-heuristic" title="Permalink"></a></h1><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>The method of topology optimization of binary structures (<a href="https://www.sciencedirect.com/science/article/abs/pii/S0168874X17305619?via%3Dihub">TOBS</a>) was originally developed in the context of optimal distribution of material in mechanical components. The TOBS algorithm only supports binary decision variables. The TOBS algorithm is a heuristic that relies on the sequential linearization of the objective and constraint functions, progressively enforcing the constraints in the process. The resulting binary linear program can be solved using any mixed integer linear programming (MILP) solver such <code>Cbc</code>. This process is repeated iteratively until convergence. This package implements the heuristic for binary nonlinear programming problems.</p><h2 id="Construct-an-instance"><a class="docs-heading-anchor" href="#Construct-an-instance">Construct an instance</a><a id="Construct-an-instance-1"></a><a class="docs-heading-anchor-permalink" href="#Construct-an-instance" title="Permalink"></a></h2><p>To construct an instance of the <code>TOBS</code> algorithm, use:</p><pre><code class="language-julia hljs">alg = TOBSAlg()</code></pre><p>When optimizing a model using <code>TOBSAlg</code>, all the variables are assumed to be binary if their lower and upper bounds are 0 and 1 respectively even if the <code>isinteger</code> flag was not used. If there are variables with other bounds&#39; values, the optimization will give an error.</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p>In this example, the classic topology optimization problem of minimizing the compliance of the structure subject to a volume constraint. Begin by installing and loading the packages required.</p><pre><code class="language-julia hljs">import Nonconvex
Nonconvex.@load TOBS
using Pkg
Pkg.add(&quot;TopOpt&quot;)
using TopOpt</code></pre><p>Define the problem and its parameters using <a href="https://github.com/JuliaTopOpt/TopOpt.jl">TopOpt.jl</a>.</p><pre><code class="language-julia hljs">E = 1.0 # Young’s modulus
v = 0.3 # Poisson’s ratio
f = 1.0 # downward force
rmin = 6.0 # filter radius
xmin = 0.001 # minimum density
V = 0.5 # maximum volume fraction
p = 3.0 # SIMP penalty

# Define FEA problem
problem_size = (160, 100) # size of rectangular mesh
x0 = fill(1.0, prod(problem_size)) # initial design
problem = PointLoadCantilever(Val{:Linear}, problem_size, (1.0, 1.0), E, v, f)
solver = FEASolver(Direct, problem; xmin=xmin)
TopOpt.setpenalty!(solver, p)
cheqfilter = DensityFilter(solver; rmin=rmin) # filter function
comp = TopOpt.Compliance(problem, solver) # compliance function</code></pre><p>Define the objective and constraint functions.</p><pre><code class="language-julia hljs">obj(x) = comp(cheqfilter(x)) # compliance objective
constr(x) = sum(cheqfilter(x)) / length(x) - V # volume fraction constraint</code></pre><p>Finally, define the optimization problem using <code>Nonconvex.jl</code> and optimize it.</p><pre><code class="language-julia hljs">m = Model(obj)
addvar!(m, zeros(length(x0)), ones(length(x0)))
Nonconvex.add_ineq_constraint!(m, constr)
options = TOBSOptions()

r = optimize(m, TOBSAlg(), x0; options=options)
r.minimizer
r.minimum</code></pre><p>The following is a visualization of the optimization history using this example.</p><p><img src="https://user-images.githubusercontent.com/84910559/164938659-797a6a6d-3518-4f7b-a4ff-24b43b822080.png" alt="histories"/></p><p><img src="https://user-images.githubusercontent.com/19524993/167059067-f08502a8-c62d-4d62-a2df-e132efc5e25c.gif" alt="gif"/></p><h2 id="Options"><a class="docs-heading-anchor" href="#Options">Options</a><a id="Options-1"></a><a class="docs-heading-anchor-permalink" href="#Options" title="Permalink"></a></h2><p>The following are the options that can be set by passing them to <code>TOBSOptions</code>, e.g. <code>TOBSOptions(movelimit = 0.1)</code>.</p><ul><li><code>movelimit</code>: the maximum move limit in each iteration as a ratio of the total number of variables. Default value is 0.1, i.e. a maximum of 10% of the variables are allowed to flip value in each iteration.</li><li><code>convParam</code>: the tolerance value. The algrotihm is said to have converged if the moving average of the relative change in the objective value in the last <code>pastN</code> iterations is less than <code>convParam</code>. Default value is 0.001.</li><li><code>pastN</code>: the number of past iterations used to compute the moving average of the relative change in the objective value. Default value is 20.</li><li><code>constrRelax</code>: the amount of constraint relaxation applied to the linear approximation in each iteration. This is the relative constraint relaxation if the violation is higher than <code>constrRelax</code> and the absolute constraint relaxation otherwise. Default value is 0.1.</li><li><code>timeLimit</code>: the time limit (in seconds) of each MILP solve for the linearized sub-problem. Default value is 1.0.</li><li><code>optimizer</code>: the <code>JuMP</code> optimizer type used to solve the MILP sub-problem. Default value is <code>Cbc.Optimizer</code>.</li><li><code>maxiter</code>: the maximum number of iterations for the algorithm. Default value is 200.</li><li><code>timeStable</code>: a boolean value that when set to <code>true</code> switches on the time stability filter of the objective&#39;s gradient, discussed in the paper. Default value is <code>true</code>.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../nomad/">« Nonlinear optimization with the MADS (NOMAD) algorithm for continuous and discrete, constrained optimization</a><a class="docs-footer-nextpage" href="../../result/">Optimization result »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.21 on <span class="colophon-date" title="Friday 15 July 2022 14:09">Friday 15 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
